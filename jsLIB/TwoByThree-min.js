"use strict";var BERING;BERING.questionaire=function(){var t=-1,e=new String,i=!1,n=!1;function s(){if($("#begend").remove(),$("#endbeg").remove(),(BERING.begining||BERING.end)&&0===$("body").find("div.commentDisplay").children().length){if(BERING.begining){$("body").find("div.commentDisplay").append($("<section class='beginEnd' id='begend'></section>"));var t="<h3>START</h3><p>"+BERING.intro+"</p>",e="#begend"}else $("body").find("div.itemDisplay").append($("<section class beginEnd id='endbeg' style='width: 75%;'></section>")),t="<h3>END</h3><p>This is the last item, don't forget to put your name in the name box above.</p><p><br></p>",e="#endbeg";$(e).html(t);var i=String($(e).find("p").css("height"));i=String(Number(i.slice(0,i.length-2))+10)+"px",$(e).css("height",i).css("margin-top","0.5em")}}function a(t){var e=BERING.content[t].inventoryText,i=BERING.content[t].smallFontText,n=BERING.content[t].item,s=n;return n!==e&&(s=n+",<span style='font-size: x-large;'> "+e+"</span>"),n!==i&&(s+="<span style='font-size: medium;'>: "+i+"</span>"),s}function o(e,i){e.attr("id")===t?e.trigger(i):(t=e.attr("id"),$("body").find("div.itemDisplay").find("div").children("p").removeClass("itemFocusOn"),e.addClass("itemFocusOn"))}function r(){n||BERING.ring.getRing().comon()&&(n=!0,$(".buttonCalculate").css("display","inline-block"),BERING.ModalDisplay.publish("<p>Congratulations, you've completed the "+BERING.title+". Select <b><i>OK</i></b> to create your chart.</p>"))}function d(t){for(var e=0;e<6;e++){var i=String(String(t.charAt(1))+String(e));$(t).append($("<button class='rateBut'id='sB_"+i+"'></button>")),$("#sB_"+i).addClass("rateButOff"),$("#sB_"+i).text(String(e))}$("button.rateBut").css("width","16.49%")}function c(){$("body").find("div.itemDisplay").find("div").children("p").removeClass("itemFocusOn"),BERING.content.forEach(l)}function l(t,e){if(3===BERING.UItype||4===BERING.UItype)void 0!==(i=$("body").find("div.itemDisplay").find("div#"+e+"s").find("button.rateButOn").attr("id"))&&(t.aVa=Number(i.charAt(4))+1);else if(5===BERING.UItype){var i;void 0!==(i=$("body").find("div.itemDisplay").find("div#"+e+"s").find("button.rateButOn").attr("id"))&&(t.aVa=Number(i.charAt(4))+1);var n=$("body").find("div.itemDisplay").find("div#"+e+"i").find("button.intenseButOn").attr("id");void 0!==n&&(t.aIn=Number(n.charAt(4))+1);var s=$(String("#pol"+String(e)));s.children().is(".butPolOn")?s.find("#dis"+e).is(".butPolOn")?t.pole=-1:s.find("#upl"+e).is(".butPolOn")&&(t.pole=1):t.pole=0}else{var a=$("body").find("div.itemDisplay").find("p#"+e);a.is(".on")?t.aVa=1:a.is(".off")?t.aVa=-1:a.is(".park")&&(t.aVa=0)}}function p(t){return $("body").find("div.itemDisplay").find("p#"+t)}function m(t,e){var i=p(e);i.removeClass("on"),i.removeClass("off"),i.removeClass("park");try{if(5===BERING.UItype){var n="Does your recent experience of feeling "+String(BERING.content[0].urEx).toLowerCase()+" make you feel good or bad?",s=$("#feelingLine");s.text(""),s.append(n),i.removeClass("onFeelGood"),i.removeClass("onFeelBad"),i.text(""),i.append(a(e))}else i.text(t.item)}catch(t){console.log("getModel222")}if(3===BERING.UItype||4===BERING.UItype){(r=$("body").find("div.itemDisplay").find("div#"+e+"s")).find("button.rateButOn").removeClass("rateButOn").addClass("rateButOff");if(0!==t.aVa){i.addClass("on");var o=String(String(e)+String(t.aVa-1));r.find("#sB_"+o).addClass("rateButOn")}t.aVa>0?i.addClass("on"):i.addClass("park")}else if(5===BERING.UItype){var r=$("body").find("div.itemDisplay").find("div#"+e+"s"),d=$("body").find("div.itemDisplay").find("div#"+e+"i");r.find("button.rateButOn").removeClass("rateButOn").addClass("rateButOff"),d.find("button.intenseButOn").removeClass("intenseButOn").addClass("intenseButOff");if(0!==t.aVa){o=String(String(e)+String(t.aVa-1));r.find("#sB_"+o).addClass("rateButOn")}if(0!==t.aIn){o=String(String(e)+String(t.aIn-1));d.find("#iB_"+o).addClass("intenseButOn")}t.aVa>0&&t.aIn>0?i.addClass("on"):i.addClass("park");var c=$(String("#pol"+String(e)));if(c.children().removeClass("butPolOn"),$("p#0").removeClass("onFeelBad"),$("p#0").removeClass("onFeelGood"),$("p#0").removeClass("on"),$("#hr01").css("opacity","1"),$("#hr02").css("opacity","1"),$("#hr11").css("opacity","1"),$("#hr12").css("opacity","1"),0!==t.aVa&&0!==t.aIn)switch(t.pole){case-1:c.find("#dis"+e).addClass("butPolOn"),$("p#0").addClass("onFeelBad");break;case 0:c.children().removeClass("butPolOn"),$("p#0").addClass("on");break;case 1:c.find("#upl"+e).addClass("butPolOn"),$("p#0").addClass("onFeelGood");break;default:c.children().removeClass("butPolOn")}$("#regular0").css("opacity","1"),$("#intense0").css("opacity","1"),$("#pol0").css("opacity","1"),1===t.aVa&&($("#intense0").css("opacity","0"),$("p#0").removeClass("onFeelBad"),$("p#0").removeClass("onFeelGood"),$("p#0").addClass("on"),$("#pol0").css("opacity","0"),$("#hr11").css("opacity","0"),$("#hr12").css("opacity","0")),1===t.aIn&&($("#regular0").css("opacity","0"),$("p#0").removeClass("onFeelBad"),$("p#0").removeClass("onFeelGood"),$("p#0").addClass("on"),$("#pol0").css("opacity","0"),$("#hr01").css("opacity","0"),$("#hr02").css("opacity","0"))}else 0===t.aVa?i.addClass("park"):-1===t.aVa?i.addClass("off"):t.redFlag?i.addClass("redFlag"):1===t.aVa&&i.addClass("on")}function g(e){if(i){var n=(a=$("body").find("textarea#cText")).val();if(0===n.length)BERING.content[t].comment="",p(t).text(BERING.content[t].item);else{BERING.content[t].comment=a.val();var s=BERING.content[t].item+"<BR><span style='font-size: 0.5em;'>COMMENT: "+n+"</span>";p(t).html(s)}a.remove(),i=!1}else if(i||-1===t||e)-1!==t||e||BERING.Modal.publish("<p>Select a description then attach a comment</p>");else{var a=$("body").find("div.commentDisplay");a.append($("<textarea type='text' name='comment' class='commentText' id='cText' ></textarea>")),i=!0,0!==BERING.content[t].comment.length?a=$("body").find("textarea#cText").val(BERING.content[t].comment):(BERING.content[t].comment="",p(t).text(BERING.content[t].item))}}return{prepSave:function(){if(i){var n=$("body").find("textarea#cText"),s=n.val();if(0===s.length)BERING.content[t].comment="",p(t).text(BERING.content[t].item);else{BERING.content[t].comment=n.val();var a=BERING.content[t].item+"COMMENT: "+s;p(t).html(a)}n.remove(),i=!1}return c(),e},getUI:function(){switch(BERING.UItype){case 1:!function(){BERING.content=BERING.Command.execute("init");var e=$("body").find("div.itemDisplay");e.css("background-image","url('../images/tree.png')"),e.append($("<div id='item0' ></div>")),$("#item0").append($("<p class='item' id='0'></p>").text(BERING.content[0].item)),$("#item0").append($("<p class='item' id='1'></p>").text(BERING.content[1].item)),e.append($("<br>")),e.append($("<div id='item1' ></div>")),$("#item1").append($("<p class='item' id='2'></p>").text(BERING.content[2].item)),$("#item1").append($("<p class='item' id='3'></p>").text(BERING.content[3].item)),e.find("div").children("p").addClass("park").css("cursor","pointer").css("font-family","sans-serif").css("line-height","120%").css("font-size","1.5em").css("padding","2px 10px 2px 10px"),s(),$(".item").click((function(){$(this).trigger("itemChoice:toggle",void 0)})),$(".item").mouseover((function(){$(this).addClass("redFlag")})),$(".item").mouseout((function(){$(this).removeClass("redFlag")})),$(".item").on("itemChoice:toggle",(function(e){$(this).removeClass("redFlag"),i&&g(!1),$(this).is(".on")?o($(this),"itemChoice:off"):$(this).is(".off")?o($(this),"itemChoice:on"):$(this).is(".park")&&(t=$(this).attr("id"),$("body").find("div.itemDisplay").find("div").children("p").removeClass("itemFocusOn"),$(this).addClass("itemFocusOn"),$(this).trigger("itemChoice:park")),BERING.content.forEach(l),r()})).on("itemChoice:on",(function(e){$(this).removeClass("off").removeClass("redFlag").addClass("on"),BERING.content[t].redFlag=!1})).on("itemChoice:off",(function(t){$(this).removeClass("on").addClass("off")})).on("itemChoice:park",(function(t){$(this).siblings(".item").removeClass("park").addClass("off"),$(this).removeClass("park").addClass("on")}))}();break;case 2:!function(){BERING.content=BERING.Command.execute("init");var e=$("body").find("div.itemDisplay");e.css("background-image","url('../images/tree.png')"),e.append($("<div id='item0' ></div>")),$("#item0").append($("<p class='item' id='0'></p>").text(BERING.content[0].item)),$("#item0").append($("<p class='item' id='1'></p>").text(BERING.content[1].item)),e.append($("<br>")),e.append($("<div id='item1' ></div>")),$("#item1").append($("<p class='item' id='2'></p>").text(BERING.content[2].item)),$("#item1").append($("<p class='item' id='3'></p>").text(BERING.content[3].item)),e.append($("<br>")),e.append($("<div id='item2' ></div>")),$("#item2").append($("<p class='item' id='4'></p>").text(BERING.content[4].item)),$("#item2").append($("<p class='item' id='5'></p>").text(BERING.content[5].item)),e.find("div").children("p").addClass("park").css("cursor","pointer").css("font-family","sans-serif").css("line-height","120%").css("font-size","1em").css("padding","2px 10px 2px 10px"),s(),$(".item").click((function(){$(this).trigger("itemChoice:toggle",!1)})),$(".item").mouseover((function(){$(this).addClass("redFlag")})),$(".item").mouseout((function(){$(this).removeClass("redFlag")})),$(".item").on("itemChoice:toggle",(function(e){$(this).removeClass("redFlag"),i&&g(!1),$(this).is(".on")?o($(this),"itemChoice:off"):$(this).is(".off")?o($(this),"itemChoice:on"):$(this).is(".park")&&(t=$(this).attr("id"),$("body").find("div.itemDisplay").find("div").children("p").removeClass("itemFocusOn"),$(this).addClass("itemFocusOn"),$(this).trigger("itemChoice:park")),BERING.content.forEach(l),r()})).on("itemChoice:on",(function(e){$(this).removeClass("off").removeClass("redFlag").addClass("on"),BERING.content[t].redFlag=!1})).on("itemChoice:off",(function(t){$(this).removeClass("on").addClass("off")})).on("itemChoice:park",(function(t){$(this).siblings(".item").removeClass("park").addClass("off"),$(this).removeClass("park").addClass("on")}))}();break;case 3:!function(){BERING.content=BERING.Command.execute("init");var t=$("body").find("div.itemDisplay");t.css("background-image","url('../images/tree.png')"),t.append($("<div id='item0' ></div>")),$("#item0").append($("<p class='item' id='0'></p>").text(BERING.content[0].item)),$("#item0").append($("<div class='rateRoc' id='0s'></div>")),d("#0s"),t.append($("<br>")),t.append($("<div id='item1' ></div>")),$("#item1").append($("<p class='item' id='1'></p>").text(BERING.content[1].item)),$("#item1").append($("<div class='rateRoc' id='1s'></div>")),d("#1s"),t.append($("<br>")),t.append($("<div id='item2' ></div>")),$("#item2").append($("<p class='item' id='2'></p>").text(BERING.content[2].item)),$("#item2").append($("<div class='rateRoc' id='2s'></div>")),d("#2s"),t.append($("<br><br><br>")),t.find("div").children("p").addClass("park").css("cursor","pointer").css("font-family","sans-serif").css("line-height","120%").css("font-size","1em").css("padding","2px 10px 2px 10px"),s(),$(".rateBut").click((function(){var t=String(String(this.id.charAt(3))+String(this.id.charAt(4)));$(this).trigger("ratingChoice:toggle",t)})),$(".rateBut").on("touchstart",(function(){var t=String(String(this.id.charAt(3))+String(this.id.charAt(4)));$(this).trigger("ratingChoice:toggle",t)})),$(".rateBut").on("ratingChoice:toggle",(function(){i&&g(!1),$(this).is(".rateButOff")&&($(this).parent().children("button").removeClass("rateButOn"),$(this).parent().parent().children("p").addClass("on"),$(this).addClass("rateButOn")),BERING.content.forEach(l),r()}))}();break;case 4:!function(){BERING.content=BERING.Command.execute("init");var t=$("body").find("div.itemDisplay");t.css("background-image","url('../images/tree.png')"),t.append($("<br>")),t.append($("<div id='item0' ></div>")),$("#item0").append($("<p class='item' id='0'></p>").text(BERING.content[0].item)),$("#item0").append($("<div class='rateRoc' id='0s'></div>")),t.append($("<br>")),d("#0s"),t.append($("<br>")),t.append($("<br>")),t.append($("<div id='item1' ></div>")),$("#item1").append($("<p class='item' id='1'></p>").text(BERING.content[1].item)),$("#item1").append($("<div class='rateRoc' id='1s'></div>")),t.append($("<br>")),t.append($("<br>")),t.append($("<br>")),t.append($("<br>")),t.append($("<br>")),t.append($("<br>")),d("#1s"),t.find("div").children("p").addClass("park").css("cursor","pointer").css("font-family","sans-serif").css("line-height","120%").css("font-size","1em").css("padding","2px 10px 2px 10px"),s(),$(".rateBut").click((function(){var t=String(String(this.id.charAt(3))+String(this.id.charAt(4)));$(this).trigger("ratingChoice:toggle",t)})),$(".rateBut").on("touchstart",(function(){var t=String(String(this.id.charAt(3))+String(this.id.charAt(4)));$(this).trigger("ratingChoice:toggle",t)})),$(".rateBut").on("ratingChoice:toggle",(function(){i&&g(!1),$(this).is(".rateButOff")&&($(this).parent().children("button").removeClass("rateButOn"),$(this).parent().parent().children("p").addClass("on"),$(this).addClass("rateButOn")),BERING.content.forEach(l),r()}))}();break;case 5:!function(){BERING.content=BERING.Command.execute("init");var t=$("body").find("div.itemDisplay");t.css("background-image","url('../images/tree.png')"),t.append($("<hr id='hr01'>")),t.append($("<div id='item0' ></div>")),$("#item0").append($("<div id='regular0'></div>")),$("#regular0").css("background-color","#fffce3"),$("#regular0").append($("<div style='text-align: center;' >How Often?</div>")),$("#regular0").append($("<div class='rateRoc' id='0s'></div>")),function(t){for(var e=["never","hardly ever","sometimes","often","most of the time","all of the time"],i=0;i<6;i++){var n=String(String(t.charAt(1))+String(i));navigator.userAgent.toLowerCase().indexOf("firefox")>-1?$(t).append($("<button class='rateBut' title='"+e[i]+"' style='margin-bottom: -0.2em;' id='sB_"+n+"'>"+String(i)+"</button>")):$(t).append($("<button class='rateBut' style='margin-bottom: -0.2em;' id='sB_"+n+"'><abbr title='"+e[i]+"' rel='tooltip'>"+String(i)+"</abbr></button>")),$("#sB_"+n).addClass("rateButOff")}$("button.rateBut").css("width","16.49%")}("#0s"),$("#item0").append($("<hr id='hr02'><p class='item' id='0'>"+a(0)+"</p>")),$("#item0").append($("<hr id='hr11'><div id='intense0'></div>")),$("#intense0").css("background-color","#fffce3"),$("#intense0").append($("<div style='text-align: center;' >How Strongly?</div>")),$("#intense0").append($("<div class='rateRoc' id='0i'></div>")),function(t){for(var e=["no feeling","very mild","mild effect","strong effect","very strong","intense"],i=0;i<6;i++){var n=String(String(t.charAt(1))+String(i));navigator.userAgent.toLowerCase().indexOf("firefox")>-1?$(t).append($("<button class='intenseBut' title ='"+e[i]+"' style='margin-bottom: -0.1em;margin-top: 0.1em;' id='iB_"+n+"'>"+String(i)+"</button>")):$(t).append($("<button class='intenseBut' style='margin-bottom: -0.1em;margin-top: 0.1em;' id='iB_"+n+"'><abbr title='"+e[i]+"' rel='tooltip'>"+String(i)+"</abbr></button>")),$("#iB_"+n).addClass("intenseButOff")}$("button.intenseBut").css("width","16.49%")}("#0i");var e=String(BERING.content[0].urEx).toLowerCase();$("#item0").append($("<hr id='hr12'><br><div style='text-align: center;font-size: large;'id='feelingLine'>Does your recent experience of feeling "+e+" make you feel good or bad?</div><br><div id='pol0' style='text-align: center;'><button class='butPol' id='upl0'>feels good</button><br><br><button class='butPol' id='dis0'>feels bad</button></div>")),t.find("div").children("p").addClass("park").css("cursor","pointer").css("font-family","sans-serif").css("line-height","60%").css("font-size","xx-large").css("padding","15px 10px 15px 10px").css("margin-top","0em").css("margin-bottom","0em").css("text-align","left"),s(),$(".rateBut").click((function(){var t=String(String(this.id.charAt(3))+String(this.id.charAt(4)));$(this).trigger("ratingChoice:toggle",t)})),$(".rateBut").on("touchstart",(function(){var t=String(String(this.id.charAt(3))+String(this.id.charAt(4)));$(this).trigger("ratingChoice:toggle",t)})),$(".intenseBut").click((function(){var t=String(String(this.id.charAt(3))+String(this.id.charAt(4)));$(this).trigger("intenseChoice:toggle",t)})),$(".intenseBut").on("touchstart",(function(){var t=String(String(this.id.charAt(3))+String(this.id.charAt(4)));$(this).trigger("intenseChoice:toggle",t)})),$(".rateBut").on("ratingChoice:toggle",(function(){if(i&&g(!1),$(this).is(".rateButOff")){$(this).parent().children("button").removeClass("rateButOn"),$(this).addClass("rateButOn");var t=$(this).parent().parent().parent().children("p");t.removeClass("onFeelGood"),t.removeClass("onFeelBad"),t.removeClass(""),$(String("#"+String(this.id.charAt(3)+"i"))).children().is(".intenseButOn")&&$(String("#pol"+String(this.id.charAt(3)))).children().is(".butPolOn")&&(t.is(".off")&&t.removeClass("off"),$("#dis0").is(".butPolOn")?(t.is(".onFeelGood")&&t.removeClass("onFeelGood"),t.addClass("onFeelBad")):(t.is(".onFeelBad")&&t.removeClass("onFeelBad"),t.addClass("onFeelGood"))),"0"===$(this).attr("id").charAt(4)&&"0"!==$("#regular0").css("opacity")?($("#intense0").css("opacity","0"),$("#pol0").css("opacity","0"),$("#feelingLine").css("opacity","0"),$("#hr11").css("opacity","0"),$("#hr12").css("opacity","0"),$("p#0").removeClass("onFeelGood"),$("p#0").removeClass("onFeelBad"),$("p#0").addClass("on"),BERING.content[0].isZero=!0):"0"!==$("#regular0").css("opacity")&&($("#intense0").css("opacity","1"),$("#pol0").css("opacity","1"),$("#feelingLine").css("opacity","1"),$("#hr11").css("opacity","1"),$("#hr12").css("opacity","1"),BERING.content[0].isZero=!1)}BERING.content.forEach(l),r()})),$(".intenseBut").on("intenseChoice:toggle",(function(){if(i&&g(!1),$(this).is(".intenseButOff")){if($(this).parent().children("button").removeClass("intenseButOn"),$(this).addClass("intenseButOn"),$(String("#"+String(this.id.charAt(3)+"s"))).children().is(".rateButOn")&&$(String("#pol"+String(this.id.charAt(3)))).children().is(".butPolOn")){var t=$(this).parent().parent().parent().children("p");t.is(".off")&&t.removeClass("off"),$("#dis0").is(".butPolOn")?(t.is(".onFeelGood")&&t.removeClass("onFeelGood"),t.addClass("onFeelBad")):(t.is(".onFeelBad")&&t.removeClass("onFeelBad"),t.addClass("onFeelGood"))}"0"===$(this).attr("id").charAt(4)&&"0"!==$("#intense0").css("opacity")?($("#regular0").css("opacity","0"),$("#pol0").css("opacity","0"),$("#feelingLine").css("opacity","0"),$("p#0").removeClass("onFeelGood"),$("p#0").removeClass("onFeelBad"),$("p#0").addClass("on"),$("#hr01").css("opacity","0"),$("#hr02").css("opacity","0"),BERING.content[0].isZero=!0):"0"!==$("#intense0").css("opacity")&&($("#regular0").css("opacity","1"),$("#feelingLine").css("opacity","1"),$("#pol0").css("opacity","1"),$("#hr01").css("opacity","1"),$("#hr02").css("opacity","1"),BERING.content[0].isZero=!1)}BERING.content.forEach(l),r()})),$(".butPol").click((function(){$(this).trigger("polarity:toggle")})),$(".butPol").on("touchstart",(function(){$(this).trigger("polarity:toggle")})),$(".butPol").on("polarity:toggle",(function(){if(i&&g(!1),$(this).parent().children("button").removeClass("butPolOn"),$(this).addClass("butPolOn"),$(String("#"+String(this.id.charAt(3)+"s"))).children().is(".rateButOn")&&$(String("#"+String(this.id.charAt(3)+"i"))).children().is(".intenseButOn")){var t=$(this).parent().parent().children("p");t.is(".off")&&t.removeClass("off"),"dis0"===$(this).attr("id")?(t.is(".onFeelGood")&&t.removeClass("onFeelGood"),t.addClass("onFeelBad")):(t.is(".onFeelBad")&&t.removeClass("onFeelBad"),t.addClass("onFeelGood"))}BERING.content.forEach(l),r()}))}()}$("body").find("div.itemDisplay").append($("<div id='endbeg'></div>"))},updateModel:c,updateView:function(){t=-1,BERING.content.forEach(m),s(),n||BERING.ring.getRing().comon()&&(n=!0)},commentIn:g,redFlag:function(){-1!==t?p(t).trigger("itemChoice:toggle",!0):BERING.Modal.publish("<p>In order to set a questionnaire item to a red flag, you must first select.</p>")},begend:s,resize:function(){s()}}}();